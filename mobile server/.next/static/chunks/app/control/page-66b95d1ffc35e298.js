(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[580],{5113:(e,t,a)=>{"use strict";var r=a(4661);a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},5225:(e,t,a)=>{"use strict";let r;a.r(t),a.d(t,{default:()=>m});var s=a(6166),o=a(5766),l=a(7011),n=a(5113);function i(e){let{socket:t,apiKey:a,overlayConnected:r}=e,[l,n]=(0,o.useState)([]),[i,c]=(0,o.useState)([]),[d,m]=(0,o.useState)([]),[x,b]=(0,o.useState)("All"),[u,p]=(0,o.useState)(null),[h,g]=(0,o.useState)(""),[y,f]=(0,o.useState)([]),[j,v]=(0,o.useState)([]),[k,N]=(0,o.useState)(null),[C,w]=(0,o.useState)("book"),[S,F]=(0,o.useState)("image"),[I,z]=(0,o.useState)(!1),[L,V]=(0,o.useState)({backgroundColor:"transparent",fontSize:32,fontFamily:"Arial",textColor:"#000000",textAlign:"center",backgroundImage:"",backgroundVideo:"",backgroundOpacity:1,maxWidth:800,justifyContent:"center",alignItems:"center"});(0,o.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/bibles"),t=await e.json();n(t.bibles);let a=new Set(["All"]);t.bibles.forEach(e=>{e.lang&&a.add(e.lang)}),m(Array.from(a).sort())}catch(e){console.error("Failed to fetch bible list:",e)}})()},[]),(0,o.useEffect)(()=>{let e=[];c(e="All"===x?l:l.filter(e=>e.lang===x)),e.length>0?p(e[0].shortname):p(null)},[x,l]),(0,o.useEffect)(()=>{u?(async()=>{z(!0);try{let e=await fetch("/api/bibles/".concat(u)),t=await e.json();f(t.verses),v(t.verses)}catch(e){console.error("Failed to fetch bible content for ".concat(u,":"),e),f([]),v([])}z(!1)})():(f([]),v([]))},[u]);let O={gen:"Genesis",ex:"Exodus",lev:"Leviticus",num:"Numbers",deut:"Deuteronomy",josh:"Joshua",judg:"Judges",ruth:"Ruth","1 sam":"1 Samuel","2 sam":"2 Samuel","1 kgs":"1 Kings","2 kgs":"2 Kings","1 chr":"1 Chronicles","2 chr":"2 Chronicles",ezra:"Ezra",neh:"Nehemiah",est:"Esther",job:"Job",ps:"Psalms",prov:"Proverbs",eccl:"Ecclesiastes",song:"Song of Solomon",isa:"Isaiah",jer:"Jeremiah",lam:"Lamentations",ezek:"Ezekiel",dan:"Daniel",hos:"Hosea",joel:"Joel",amos:"Amos",obad:"Obadiah",jonah:"Jonah",mic:"Micah",nah:"Nahum",hab:"Habakkuk",zeph:"Zephaniah",hag:"Haggai",zech:"Zechariah",mal:"Malachi",matt:"Matthew",mk:"Mark",lk:"Luke",jn:"John",acts:"Acts",rom:"Romans","1 cor":"1 Corinthians","2 cor":"2 Corinthians",gal:"Galatians",eph:"Ephesians",phil:"Philippians",col:"Colossians","1 thes":"1 Thessalonians","2 thes":"2 Thessalonians","1 tim":"1 Timothy","2 tim":"2 Timothy",titus:"Titus",phlm:"Philemon",heb:"Hebrews",jas:"James","1 pet":"1 Peter","2 pet":"2 Peter","1 jn":"1 John","2 jn":"2 John","3 jn":"3 John",jude:"Jude",rev:"Revelation"};(0,o.useEffect)(()=>{let e=[];if(h){let t=h.toLowerCase(),a=Object.keys(O).find(e=>t.startsWith(e+" "));if(a){let e=O[a];t=t.replace(a,e.toLowerCase())}e=y.filter(e=>{let a="".concat(e.book_name," ").concat(e.chapter,":").concat(e.verse).toLowerCase(),r=e.text.toLowerCase();return a.includes(t)||r.includes(t)})}else e=y;v([...e].sort((e,t)=>"book"===C?e.book!==t.book?e.book-t.book:e.chapter!==t.chapter?e.chapter-t.chapter:e.verse-t.verse:"chapter"===C?e.chapter!==t.chapter?e.chapter-t.chapter:e.book!==t.book?e.book-t.book:e.verse-t.verse:"verse"===C?e.verse!==t.verse?e.verse-t.verse:e.chapter!==t.chapter?e.chapter-t.chapter:e.book-t.book:0))},[h,y,C]);let A=()=>{t&&k&&(console.log("Sending verse:",{verse:k,styles:L}),t.emit("setVerse",{verse:k,styles:L}))};return(0,s.jsxs)("div",{className:"p-4 bg-background text-text min-h-screen",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4 text-primary",children:"OBS Bible Plugin Control"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"language-select",className:"block text-sm font-medium text-text",children:"Select Language:"}),(0,s.jsx)("select",{id:"language-select",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border border-primary focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md bg-background text-text shadow-sm",value:x,onChange:e=>b(e.target.value),children:d.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"bible-select",className:"block text-sm font-medium text-text",children:"Select Bible:"}),(0,s.jsx)("select",{id:"bible-select",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border border-primary focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md bg-background text-text shadow-sm",value:u||"",onChange:e=>p(e.target.value),children:null==i?void 0:i.map(e=>(0,s.jsx)("option",{value:e.shortname,children:e.name},e.shortname))})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"search-bar",className:"block text-sm font-medium text-text",children:"Search Verse:"}),(0,s.jsx)("input",{type:"text",id:"search-bar",className:"mt-1 block w-full pl-3 pr-3 py-2 text-base border border-primary focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md bg-background text-text shadow-sm",placeholder:"e.g., John 3:16 or Genesis",value:h,onChange:e=>g(e.target.value)})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"sort-by",className:"block text-sm font-medium text-text",children:"Sort By:"}),(0,s.jsxs)("select",{id:"sort-by",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border border-primary focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md bg-background text-text shadow-sm",value:C,onChange:e=>w(e.target.value),children:[(0,s.jsx)("option",{value:"book",children:"Book"}),(0,s.jsx)("option",{value:"chapter",children:"Chapter"}),(0,s.jsx)("option",{value:"verse",children:"Verse"})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2 text-accent",children:"Verse List"}),(0,s.jsx)("div",{className:"border rounded-md p-2 h-48 overflow-y-auto bg-secondary/20",children:I?(0,s.jsx)("p",{className:"text-text/50",children:"Loading..."}):j.length>0?j.map((e,t)=>(0,s.jsxs)("div",{className:"p-2 cursor-pointer hover:bg-primary/50 ".concat(k===e?"bg-primary":""),onClick:()=>N(e),onDoubleClick:()=>{N(e),A()},children:[(0,s.jsxs)("p",{className:"font-semibold text-text",children:[e.book_name," ",e.chapter,":",e.verse]}),(0,s.jsxs)("p",{className:"text-sm text-text/70",children:[e.text.substring(0,100),"..."]})]},t)):(0,s.jsx)("p",{className:"text-text/50",children:h?"No verses found for your search.":"Select a bible to see verses."})})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2 text-accent",children:"Preview Panel"}),(0,s.jsxs)("div",{className:"border rounded-md p-4 min-h-[100px] flex items-center justify-center relative overflow-hidden border-primary",style:{backgroundColor:L.backgroundColor,fontSize:"".concat(L.fontSize,"px"),fontFamily:L.fontFamily,color:L.textColor,textAlign:L.textAlign,justifyContent:L.justifyContent,alignItems:L.alignItems},children:[L.backgroundImage&&(0,s.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"url(".concat(L.backgroundImage,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",opacity:void 0!==L.backgroundOpacity?L.backgroundOpacity:1}}),L.backgroundVideo&&(0,s.jsx)("video",{className:"absolute inset-0 w-full h-full object-cover",src:L.backgroundVideo,autoPlay:!0,loop:!0,muted:!0,style:{opacity:void 0!==L.backgroundOpacity?L.backgroundOpacity:1}}),k?(0,s.jsxs)("p",{className:"relative z-10",style:{maxWidth:"".concat(L.maxWidth,"px")},children:[k.text," - ",k.book_name," ",k.chapter,":",k.verse]}):(0,s.jsx)("p",{className:"text-gray-500 relative z-10",children:"Select a verse to preview."})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2 text-accent",children:"Customization Controls"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("fieldset",{className:"border border-secondary p-4 rounded-md",children:[(0,s.jsx)("legend",{className:"text-lg font-semibold text-accent px-2",children:"Background"}),(0,s.jsxs)("div",{className:"flex space-x-2 mb-4",children:[(0,s.jsx)("button",{onClick:()=>F("image"),className:"px-3 py-1 border rounded-md text-sm ".concat("image"===S?"bg-primary text-white":"border-primary text-text"," hover:opacity-80"),children:"Image"}),(0,s.jsx)("button",{onClick:()=>F("video"),className:"px-3 py-1 border rounded-md text-sm ".concat("video"===S?"bg-primary text-white":"border-primary text-text"," hover:opacity-80"),children:"Video"})]}),"image"===S&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"bg-image-url",className:"block text-sm font-medium text-text",children:"Background Image URL:"}),(0,s.jsx)("input",{type:"text",id:"bg-image-url",className:"mt-1 block w-full pl-3 pr-3 py-2 text-base border border-primary focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md bg-background text-text shadow-sm",placeholder:"e.g., https://example.com/image.jpg",value:L.backgroundImage.startsWith("data:")?"":L.backgroundImage,onChange:e=>V({...L,backgroundImage:e.target.value,backgroundVideo:""})})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"bg-image-file",className:"block text-sm font-medium text-text",children:"Or upload from computer:"}),(0,s.jsx)("input",{type:"file",id:"bg-image-file",accept:"image/*",className:"mt-1 block w-full text-sm text-text file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-white hover:file:bg-primary/80",onChange:e=>{let t=e.target.files[0];if(t){let e=new FileReader;e.onload=e=>{V({...L,backgroundImage:e.target.result,backgroundVideo:""})},e.readAsDataURL(t)}}})]})]}),"video"===S&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"bg-video-url",className:"block text-sm font-medium text-text",children:"Background Video URL:"}),(0,s.jsx)("input",{type:"text",id:"bg-video-url",className:"mt-1 block w-full pl-3 pr-3 py-2 text-base border border-primary focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md bg-background text-text shadow-sm",placeholder:"e.g., https://example.com/video.mp4",value:L.backgroundVideo.startsWith("data:")?"":L.backgroundVideo,onChange:e=>V({...L,backgroundVideo:e.target.value,backgroundImage:""})})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"bg-video-file",className:"block text-sm font-medium text-text",children:"Or upload from computer:"}),(0,s.jsx)("input",{type:"file",id:"bg-video-file",accept:"video/*",className:"mt-1 block w-full text-sm text-text file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-white hover:file:bg-primary/80",onChange:e=>{let t=e.target.files[0];if(t){let e=new FileReader;e.onload=e=>{V({...L,backgroundVideo:e.target.result,backgroundImage:""})},e.readAsDataURL(t)}}})]})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"bg-opacity",className:"block text-sm font-medium text-text",children:"Background Opacity:"}),(0,s.jsx)("input",{type:"range",id:"bg-opacity",min:"0",max:"1",step:"0.01",value:L.backgroundOpacity,onChange:e=>V({...L,backgroundOpacity:parseFloat(e.target.value)}),className:"w-full accent-primary"}),(0,s.jsxs)("span",{children:[(100*L.backgroundOpacity).toFixed(0),"%"]})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"bg-color",className:"block text-sm font-medium text-text",children:"Background Color:"}),(0,s.jsx)("input",{type:"color",id:"bg-color",value:"transparent"===L.backgroundColor?"#000000":L.backgroundColor,onChange:e=>V({...L,backgroundColor:e.target.value}),className:"accent-primary"}),(0,s.jsx)("button",{onClick:()=>V({...L,backgroundColor:"transparent"}),className:"ml-2 px-3 py-1 border border-primary rounded-md text-sm bg-background text-text shadow-sm hover:opacity-80",children:"Transparent"})]})]}),(0,s.jsxs)("fieldset",{className:"border border-secondary p-4 rounded-md",children:[(0,s.jsx)("legend",{className:"text-lg font-semibold text-accent px-2",children:"Typography"}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"font-size",className:"block text-sm font-medium text-text",children:"Font Size:"}),(0,s.jsx)("input",{type:"range",id:"font-size",min:"16",max:"100",value:L.fontSize,onChange:e=>V({...L,fontSize:parseInt(e.target.value)}),className:"w-full accent-primary"}),(0,s.jsxs)("span",{children:[L.fontSize,"px"]})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"font-family",className:"block text-sm font-medium text-text",children:"Font Family:"}),(0,s.jsxs)("select",{id:"font-family",value:L.fontFamily,onChange:e=>V({...L,fontFamily:e.target.value}),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border border-primary focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md bg-background text-text shadow-sm",children:[(0,s.jsx)("option",{children:"Arial"}),(0,s.jsx)("option",{children:"Verdana"}),(0,s.jsx)("option",{children:"Georgia"}),(0,s.jsx)("option",{children:"Times New Roman"}),(0,s.jsx)("option",{children:"Courier New"})]})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"text-color",className:"block text-sm font-medium text-text",children:"Text Color:"}),(0,s.jsx)("input",{type:"color",id:"text-color",value:L.textColor,onChange:e=>V({...L,textColor:e.target.value}),className:"accent-primary"})]})]}),(0,s.jsxs)("fieldset",{className:"border border-secondary p-4 rounded-md",children:[(0,s.jsx)("legend",{className:"text-lg font-semibold text-accent px-2",children:"Layout"}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"max-width",className:"block text-sm font-medium text-text",children:"Max Width (px):"}),(0,s.jsx)("input",{type:"number",id:"max-width",min:"100",max:"1920",value:L.maxWidth,onChange:e=>V({...L,maxWidth:parseInt(e.target.value)}),className:"mt-1 block w-full pl-3 pr-3 py-2 text-base border border-primary focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md bg-background text-text shadow-sm"})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text",children:"Horizontal Alignment:"}),(0,s.jsxs)("div",{className:"mt-1 flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>V({...L,justifyContent:"flex-start"}),className:"px-3 py-1 border rounded-md text-sm ".concat("flex-start"===L.justifyContent?"bg-primary text-white":"border-primary text-text"," hover:opacity-80"),children:"Left"}),(0,s.jsx)("button",{onClick:()=>V({...L,justifyContent:"center"}),className:"px-3 py-1 border rounded-md text-sm ".concat("center"===L.justifyContent?"bg-primary text-white":"border-primary text-text"," hover:opacity-80"),children:"Center"}),(0,s.jsx)("button",{onClick:()=>V({...L,justifyContent:"flex-end"}),className:"px-3 py-1 border rounded-md text-sm ".concat("flex-end"===L.justifyContent?"bg-primary text-white":"border-primary text-text"," hover:opacity-80"),children:"Right"})]})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text",children:"Vertical Alignment:"}),(0,s.jsxs)("div",{className:"mt-1 flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>V({...L,alignItems:"flex-start"}),className:"px-3 py-1 border rounded-md text-sm ".concat("flex-start"===L.alignItems?"bg-primary text-white":"border-primary text-text"," hover:opacity-80"),children:"Top"}),(0,s.jsx)("button",{onClick:()=>V({...L,alignItems:"center"}),className:"px-3 py-1 border rounded-md text-sm ".concat("center"===L.alignItems?"bg-primary text-white":"border-primary text-text"," hover:opacity-80"),children:"Middle"}),(0,s.jsx)("button",{onClick:()=>V({...L,alignItems:"flex-end"}),className:"px-3 py-1 border rounded-md text-sm ".concat("flex-end"===L.alignItems?"bg-primary text-white":"border-primary text-text"," hover:opacity-80"),children:"Bottom"})]})]})]})]})]}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("button",{onClick:A,className:"bg-primary text-white px-4 py-2 rounded-md ".concat(r?"hover:opacity-80":"opacity-50 cursor-not-allowed"),disabled:!r,children:"Go Live"}),(0,s.jsx)("button",{onClick:()=>{t&&(t.emit("clearVerse"),N(null))},className:"bg-red-500 text-white px-4 py-2 rounded-md ".concat(r?"hover:opacity-80":"opacity-50 cursor-not-allowed"),disabled:!r,children:"Clear"})]})]})}function c(e){let{socket:t,apiKey:a,overlayConnected:r}=e,[l,n]=(0,o.useState)([]),[i,c]=(0,o.useState)([]),[d,m]=(0,o.useState)(null),[x,b]=(0,o.useState)(null),[u,p]=(0,o.useState)(""),[h,g]=(0,o.useState)(!1),[y,f]=(0,o.useState)("image"),[j,v]=(0,o.useState)({backgroundColor:"transparent",fontSize:32,fontFamily:"Arial",textColor:"#000000",textAlign:"center",backgroundImage:"",backgroundVideo:"",backgroundOpacity:1,maxWidth:800,justifyContent:"center",alignItems:"center"});(0,o.useEffect)(()=>{(async()=>{g(!0);try{let e=await fetch("/api/hymns"),t=await e.json();n(t),c(t)}catch(e){console.error("Failed to fetch hymns:",e)}g(!1)})()},[]),(0,o.useEffect)(()=>{c(l.filter(e=>e.title.toLowerCase().includes(u.toLowerCase())))},[u,l]);let k=()=>{if(t&&d&&x){let e={hymn:{title:d.title,verse:x},styles:j};console.log("Sending hymn verse:",e),t.emit("setHymn",e)}};return(0,s.jsxs)("div",{className:"p-4 bg-background text-text min-h-screen",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4 text-primary",children:"Hymn Control"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"search-bar",className:"block text-sm font-medium text-text",children:"Search Hymn:"}),(0,s.jsx)("input",{type:"text",id:"search-bar",className:"mt-1 block w-full pl-3 pr-3 py-2 text-base border border-primary focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md bg-background text-text shadow-sm",placeholder:"e.g., Amazing Grace",value:u,onChange:e=>p(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2 text-accent",children:"Hymn List"}),(0,s.jsx)("div",{className:"border rounded-md p-2 h-48 overflow-y-auto bg-secondary/20",children:h?(0,s.jsx)("p",{className:"text-text/50",children:"Loading..."}):i.length>0?i.map(e=>(0,s.jsx)("div",{className:"p-2 cursor-pointer hover:bg-primary/50 ".concat((null==d?void 0:d.id)===e.id?"bg-primary":""),onClick:()=>{m(e),b(null)},children:(0,s.jsx)("p",{className:"font-semibold text-text",children:e.title})},e.id)):(0,s.jsx)("p",{className:"text-text/50",children:"No hymns found."})})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2 text-accent",children:"Verse List"}),(0,s.jsx)("div",{className:"border rounded-md p-2 h-48 overflow-y-auto bg-secondary/20",children:d?JSON.parse(d.verses).map((e,t)=>(0,s.jsx)("div",{className:"p-2 cursor-pointer hover:bg-primary/50 ".concat(x===e?"bg-primary":""),onClick:()=>b(e),onDoubleClick:()=>{b(e),k()},children:(0,s.jsxs)("p",{className:"text-sm text-text/70",children:[e.substring(0,100),"..."]})},t)):(0,s.jsx)("p",{className:"text-text/50",children:"Select a hymn to see verses."})})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2 text-accent",children:"Preview Panel"}),(0,s.jsxs)("div",{className:"border rounded-md p-4 min-h-[100px] flex items-center justify-center relative overflow-hidden border-primary",style:{backgroundColor:j.backgroundColor,fontSize:"".concat(j.fontSize,"px"),fontFamily:j.fontFamily,color:j.textColor,textAlign:j.textAlign,justifyContent:j.justifyContent,alignItems:j.alignItems},children:[j.backgroundImage&&(0,s.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"url(".concat(j.backgroundImage,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",opacity:void 0!==j.backgroundOpacity?j.backgroundOpacity:1}}),j.backgroundVideo&&(0,s.jsx)("video",{className:"absolute inset-0 w-full h-full object-cover",src:j.backgroundVideo,autoPlay:!0,loop:!0,muted:!0,style:{opacity:void 0!==j.backgroundOpacity?j.backgroundOpacity:1}}),x?(0,s.jsx)("div",{className:"relative z-10",style:{maxWidth:"".concat(j.maxWidth,"px")},children:(0,s.jsx)("div",{className:"",dangerouslySetInnerHTML:{__html:x.replace(/\n/g,"<br />")}})}):(0,s.jsx)("p",{className:"text-gray-500 relative z-10",children:"Select a verse to preview."})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2 text-accent",children:"Customization Controls"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("fieldset",{className:"border border-secondary p-4 rounded-md",children:[(0,s.jsx)("legend",{className:"text-lg font-semibold text-accent px-2",children:"Background"}),(0,s.jsxs)("div",{className:"flex space-x-2 mb-4",children:[(0,s.jsx)("button",{onClick:()=>f("image"),className:"px-3 py-1 border rounded-md text-sm ".concat("image"===y?"bg-primary text-white":"border-primary text-text"," hover:opacity-80"),children:"Image"}),(0,s.jsx)("button",{onClick:()=>f("video"),className:"px-3 py-1 border rounded-md text-sm ".concat("video"===y?"bg-primary text-white":"border-primary text-text"," hover:opacity-80"),children:"Video"})]}),"image"===y&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"bg-image-url",className:"block text-sm font-medium text-text",children:"Background Image URL:"}),(0,s.jsx)("input",{type:"text",id:"bg-image-url",className:"mt-1 block w-full pl-3 pr-3 py-2 text-base border border-primary focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md bg-background text-text shadow-sm",placeholder:"e.g., https://example.com/image.jpg",value:j.backgroundImage.startsWith("data:")?"":j.backgroundImage,onChange:e=>v({...j,backgroundImage:e.target.value,backgroundVideo:""})})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"bg-image-file",className:"block text-sm font-medium text-text",children:"Or upload from computer:"}),(0,s.jsx)("input",{type:"file",id:"bg-image-file",accept:"image/*",className:"mt-1 block w-full text-sm text-text file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-white hover:file:bg-primary/80",onChange:e=>{let t=e.target.files[0];if(t){let e=new FileReader;e.onload=e=>{v({...j,backgroundImage:e.target.result,backgroundVideo:""})},e.readAsDataURL(t)}}})]})]}),"video"===y&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"bg-video-url",className:"block text-sm font-medium text-text",children:"Background Video URL:"}),(0,s.jsx)("input",{type:"text",id:"bg-video-url",className:"mt-1 block w-full pl-3 pr-3 py-2 text-base border border-primary focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md bg-background text-text shadow-sm",placeholder:"e.g., https://example.com/video.mp4",value:j.backgroundVideo.startsWith("data:")?"":j.backgroundVideo,onChange:e=>v({...j,backgroundVideo:e.target.value,backgroundImage:""})})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"bg-video-file",className:"block text-sm font-medium text-text",children:"Or upload from computer:"}),(0,s.jsx)("input",{type:"file",id:"bg-video-file",accept:"video/*",className:"mt-1 block w-full text-sm text-text file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-white hover:file:bg-primary/80",onChange:e=>{let t=e.target.files[0];if(t){let e=new FileReader;e.onload=e=>{v({...j,backgroundVideo:e.target.result,backgroundImage:""})},e.readAsDataURL(t)}}})]})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"bg-opacity",className:"block text-sm font-medium text-text",children:"Background Opacity:"}),(0,s.jsx)("input",{type:"range",id:"bg-opacity",min:"0",max:"1",step:"0.01",value:j.backgroundOpacity,onChange:e=>v({...j,backgroundOpacity:parseFloat(e.target.value)}),className:"w-full accent-primary"}),(0,s.jsxs)("span",{children:[(100*j.backgroundOpacity).toFixed(0),"%"]})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"bg-color",className:"block text-sm font-medium text-text",children:"Background Color:"}),(0,s.jsx)("input",{type:"color",id:"bg-color",value:"transparent"===j.backgroundColor?"#000000":j.backgroundColor,onChange:e=>v({...j,backgroundColor:e.target.value}),className:"accent-primary"}),(0,s.jsx)("button",{onClick:()=>v({...j,backgroundColor:"transparent"}),className:"ml-2 px-3 py-1 border border-primary rounded-md text-sm bg-background text-text shadow-sm hover:opacity-80",children:"Transparent"})]})]}),(0,s.jsxs)("fieldset",{className:"border border-secondary p-4 rounded-md",children:[(0,s.jsx)("legend",{className:"text-lg font-semibold text-accent px-2",children:"Typography"}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"font-size",className:"block text-sm font-medium text-text",children:"Font Size:"}),(0,s.jsx)("input",{type:"range",id:"font-size",min:"16",max:"100",value:j.fontSize,onChange:e=>v({...j,fontSize:parseInt(e.target.value)}),className:"w-full accent-primary"}),(0,s.jsxs)("span",{children:[j.fontSize,"px"]})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"font-family",className:"block text-sm font-medium text-text",children:"Font Family:"}),(0,s.jsxs)("select",{id:"font-family",value:j.fontFamily,onChange:e=>v({...j,fontFamily:e.target.value}),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border border-primary focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md bg-background text-text shadow-sm",children:[(0,s.jsx)("option",{children:"Arial"}),(0,s.jsx)("option",{children:"Verdana"}),(0,s.jsx)("option",{children:"Georgia"}),(0,s.jsx)("option",{children:"Times New Roman"}),(0,s.jsx)("option",{children:"Courier New"})]})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"text-color",className:"block text-sm font-medium text-text",children:"Text Color:"}),(0,s.jsx)("input",{type:"color",id:"text-color",value:j.textColor,onChange:e=>v({...j,textColor:e.target.value}),className:"accent-primary"})]})]}),(0,s.jsxs)("fieldset",{className:"border border-secondary p-4 rounded-md",children:[(0,s.jsx)("legend",{className:"text-lg font-semibold text-accent px-2",children:"Layout"}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"max-width",className:"block text-sm font-medium text-text",children:"Max Width (px):"}),(0,s.jsx)("input",{type:"number",id:"max-width",min:"100",max:"1920",value:j.maxWidth,onChange:e=>v({...j,maxWidth:parseInt(e.target.value)}),className:"mt-1 block w-full pl-3 pr-3 py-2 text-base border border-primary focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md bg-background text-text shadow-sm"})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text",children:"Horizontal Alignment:"}),(0,s.jsxs)("div",{className:"mt-1 flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>v({...j,justifyContent:"flex-start"}),className:"px-3 py-1 border rounded-md text-sm ".concat("flex-start"===j.justifyContent?"bg-primary text-white":"border-primary text-text"," hover:opacity-80"),children:"Left"}),(0,s.jsx)("button",{onClick:()=>v({...j,justifyContent:"center"}),className:"px-3 py-1 border rounded-md text-sm ".concat("center"===j.justifyContent?"bg-primary text-white":"border-primary text-text"," hover:opacity-80"),children:"Center"}),(0,s.jsx)("button",{onClick:()=>v({...j,justifyContent:"flex-end"}),className:"px-3 py-1 border rounded-md text-sm ".concat("flex-end"===j.justifyContent?"bg-primary text-white":"border-primary text-text"," hover:opacity-80"),children:"Right"})]})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text",children:"Vertical Alignment:"}),(0,s.jsxs)("div",{className:"mt-1 flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>v({...j,alignItems:"flex-start"}),className:"px-3 py-1 border rounded-md text-sm ".concat("flex-start"===j.alignItems?"bg-primary text-white":"border-primary text-text"," hover:opacity-80"),children:"Top"}),(0,s.jsx)("button",{onClick:()=>v({...j,alignItems:"center"}),className:"px-3 py-1 border rounded-md text-sm ".concat("center"===j.alignItems?"bg-primary text-white":"border-primary text-text"," hover:opacity-80"),children:"Middle"}),(0,s.jsx)("button",{onClick:()=>v({...j,alignItems:"flex-end"}),className:"px-3 py-1 border rounded-md text-sm ".concat("flex-end"===j.alignItems?"bg-primary text-white":"border-primary text-text"," hover:opacity-80"),children:"Bottom"})]})]})]})]})]}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("button",{onClick:k,className:"bg-primary text-white px-4 py-2 rounded-md ".concat(r?"hover:opacity-80":"opacity-50 cursor-not-allowed"),disabled:!r,children:"Go Live"}),(0,s.jsx)("button",{onClick:()=>{t&&(t.emit("clearHymn"),m(null),b(null))},className:"bg-red-500 text-white px-4 py-2 rounded-md ".concat(r?"hover:opacity-80":"opacity-50 cursor-not-allowed"),disabled:!r,children:"Clear"})]})]})}function d(){let[e,t]=(0,o.useState)("bible"),[a,d]=(0,o.useState)(null),[m,x]=(0,o.useState)(!1),b=(0,n.useRouter)(),u=(0,n.useSearchParams)();return(0,o.useEffect)(()=>{let e=u.get("key");if(!e){console.error("API Key not found in URL, redirecting to home."),b.push("/");return}return d(e),(r=(0,l.Ay)("http://localhost:3000",{query:{apiKey:e,type:"mobile"},transports:["websocket"]})).on("connect",()=>console.log("Connected to socket.io server")),r.on("disconnect",()=>{console.log("Disconnected from socket.io server"),x(!1)}),r.on("overlayConnected",()=>{console.log("Overlay connected!"),x(!0)}),r.on("overlayDisconnected",()=>{console.log("Overlay disconnected!"),x(!1)}),r.on("connect_error",e=>{console.error("Socket connection error:",e.message)}),()=>{r&&r.disconnect()}},[b,u]),(0,s.jsxs)("div",{className:"p-4 bg-background text-text min-h-screen",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-accent",children:"API Key:"}),(0,s.jsx)("p",{className:"text-text break-all",children:a||"Loading..."}),(0,s.jsxs)("p",{className:"text-sm font-medium ".concat(m?"text-green-500":"text-red-500"),children:["Overlay Status: ",m?"Connected":"Disconnected"]})]}),(0,s.jsxs)("div",{className:"flex space-x-4 mb-4",children:[(0,s.jsx)("button",{onClick:()=>t("bible"),className:"px-4 py-2 rounded-md ".concat("bible"===e?"bg-primary text-white":"bg-secondary text-text"),children:"Bible Control"}),(0,s.jsx)("button",{onClick:()=>t("hymn"),className:"px-4 py-2 rounded-md ".concat("hymn"===e?"bg-primary text-white":"bg-secondary text-text"),children:"Hymn Control"})]}),a&&("bible"===e?(0,s.jsx)(i,{socket:r,apiKey:a,overlayConnected:m}):(0,s.jsx)(c,{socket:r,apiKey:a,overlayConnected:m}))]})}function m(){return(0,s.jsx)(o.Suspense,{fallback:(0,s.jsx)("div",{children:"Loading control panel..."}),children:(0,s.jsx)(d,{})})}},6225:(e,t,a)=>{Promise.resolve().then(a.bind(a,5225))}},e=>{e.O(0,[11,544,134,358],()=>e(e.s=6225)),_N_E=e.O()}]);