(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5113:(e,o,t)=>{"use strict";var r=t(4661);t.o(r,"useRouter")&&t.d(o,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(o,{useSearchParams:function(){return r.useSearchParams}})},6968:(e,o,t)=>{"use strict";t.r(o),t.d(o,{default:()=>l});var r=t(6166),n=t(5766),c=t(5113),s=t(7011),a=t(8074);function l(){console.log("HomePage component rendered.");let[e,o]=(0,n.useState)(null),[t,l]=(0,n.useState)(""),i=(0,c.useRouter)(),d=(0,n.useRef)(null);console.log("/control?key=".concat(e)),(0,n.useEffect)(()=>{let e;return console.log("useEffect: Starting HomePage setup..."),(async()=>{try{let t=await fetch("/api/generate-api-key");e=(await t.json()).apiKey,o(e),console.log("API Key fetched:",e);let r="".concat(window.location.origin,"/overlay?key=").concat(e);l(r),console.log("Generated Overlay URL:",r),d.current=(0,s.Ay)("http://localhost:3000",{query:{apiKey:e,type:"home"},transports:["websocket"]}),console.log("Socket initialized:",d.current),console.log("Attaching socket event listeners..."),d.current.on("connect",()=>{console.log("Home page connected to socket.io server"),console.log("Socket ID:",d.current.id)}),d.current.on("disconnect",()=>console.log("Home page disconnected from socket.io server")),d.current.on("overlayConnected",()=>{console.log("overlayConnected event received on home page. Redirecting..."),a.oR.success("Overlay Connected! Redirecting to control panel."),e?i.push("/control?key=".concat(e)):console.log({message:"no api key"})}),d.current.on("connect_error",e=>{console.error("Home page socket connection error:",e.message),a.oR.error("Socket connection error: ".concat(e.message))}),console.log("Socket event listeners attached.")}catch(e){console.error("Failed to generate API key or connect socket:",e),a.oR.error("Failed to initialize: "+e.message)}})(),()=>{console.log("useEffect cleanup: Disconnecting socket if it exists."),d.current&&d.current.disconnect()}},[]);let u=async e=>{var o,t;if(null==(t=navigator)||null==(o=t.clipboard)?void 0:o.writeText)try{await navigator.clipboard.writeText(e),a.oR.success("Overlay URL copied to clipboard!");return}catch(e){console.error("Clipboard API failed:",e)}};return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background text-text p-4",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold mb-6 text-primary",children:"OBS Bible Plugin"}),(0,r.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center max-w-md w-full",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-accent",children:"Welcome!"}),(0,r.jsx)("p",{className:"mb-4 text-gray-700",children:"Use this plugin to display Bible verses on your OBS streams."}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{htmlFor:"overlay-url",className:"block text-sm font-medium text-gray-700 mb-2",children:"OBS Browser Source URL:"}),(0,r.jsxs)("div",{className:"flex items-center border border-gray-300 rounded-md shadow-sm overflow-hidden",children:[(0,r.jsx)("input",{type:"text",id:"overlay-url",readOnly:!0,value:t,className:"flex-grow p-2 text-sm bg-gray-50 text-gray-800 focus:outline-none"}),(0,r.jsx)("button",{onClick:()=>u(t),className:"bg-primary text-white px-4 py-2 text-sm hover:opacity-80 transition-opacity duration-200",children:"Copy"})]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-4",children:"Copy the URL above and paste it into OBS as a Browser Source. Once the overlay connects, you will be redirected to the control panel."}),(0,r.jsx)("button",{onClick:()=>{e&&i.push("/control?key=".concat(e))},className:"mt-4 bg-secondary text-white px-4 py-2 rounded-md hover:opacity-80",disabled:!e,children:"Go to Control Panel (Manual)"})]})]})}},7081:(e,o,t)=>{Promise.resolve().then(t.bind(t,6968))}},e=>{e.O(0,[11,74,544,134,358],()=>e(e.s=7081)),_N_E=e.O()}]);