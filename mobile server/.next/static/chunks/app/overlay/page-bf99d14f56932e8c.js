(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[465],{2400:(e,o,n)=>{Promise.resolve().then(n.bind(n,2437))},2437:(e,o,n)=>{"use strict";let r;n.r(o),n.d(o,{default:()=>c});var t=n(6166),l=n(5766),a=n(7011);function c(){let[e,o]=(0,l.useState)(null),[n,c]=(0,l.useState)(null),[s,i]=(0,l.useState)({});return(0,l.useEffect)(()=>((async()=>{let e="http://localhost:3000";if(!e)return console.error("NEXT_PUBLIC_SERVER_URL is not defined");let n=new URLSearchParams(window.location.search).get("key");if(!n)return console.error("API Key not found in URL");(r=(0,a.Ay)(e,{query:{apiKey:n,type:"overlay"},transports:["websocket"]})).on("connect",()=>{console.log("Overlay connected to socket.io server")}),r.on("updateVerse",e=>{console.log("Overlay received updateVerse:",e),c(null),o(e.verse),i(e.styles)}),r.on("clearVerse",()=>{console.log("Overlay received clearVerse"),o(null),i({})}),r.on("setHymn",e=>{console.log("Overlay received setHymn:",e),o(null),c(e.hymn),i(e.styles)}),r.on("clearHymn",()=>{console.log("Overlay received clearHymn"),c(null),i({})}),r.on("disconnect",()=>{console.log("Overlay disconnected from socket.io server")}),r.on("connect_error",e=>{console.error("Overlay socket connection error:",e.message)})})(),()=>{r&&r.disconnect()}),[]),(0,t.jsxs)("div",{className:"w-screen h-screen flex relative overflow-hidden",style:{backgroundColor:s.backgroundColor,justifyContent:s.justifyContent||"center",alignItems:s.alignItems||"center"},children:[s.backgroundImage&&(0,t.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"url(".concat(s.backgroundImage,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundColor:s.backgroundColor,opacity:void 0!==s.backgroundOpacity?s.backgroundOpacity:1}}),s.backgroundVideo&&(0,t.jsx)("video",{className:"absolute inset-0 w-full h-full object-cover",src:s.backgroundVideo,autoPlay:!0,loop:!0,muted:!0,style:{backgroundColor:s.backgroundColor,opacity:void 0!==s.backgroundOpacity?s.backgroundOpacity:1}}),!s.backgroundImage&&!s.backgroundVideo&&s.backgroundColor&&(0,t.jsx)("div",{className:"absolute inset-0",style:{backgroundColor:s.backgroundColor}}),e&&(0,t.jsxs)("div",{className:"relative p-4 rounded-lg z-10",style:{fontSize:"".concat(s.fontSize||32,"px"),fontFamily:s.fontFamily||"sans-serif",color:s.textColor||"#fff",textAlign:s.textAlign||"center",maxWidth:"".concat(s.maxWidth||800,"px")},children:[(0,t.jsx)("p",{className:"font-bold",children:e.text}),(0,t.jsxs)("p",{className:"text-sm mt-2",children:[e.book_name," ",e.chapter,":",e.verse]})]}),n&&(0,t.jsx)("div",{className:"relative p-4 rounded-lg z-10",style:{fontSize:"".concat(s.fontSize||32,"px"),fontFamily:s.fontFamily||"sans-serif",color:s.textColor||"#fff",textAlign:s.textAlign||"center",maxWidth:"".concat(s.maxWidth||800,"px")},children:(0,t.jsx)("div",{className:"",dangerouslySetInnerHTML:{__html:n.verse.replace(/\n/g,"<br />")}})})]})}}},e=>{e.O(0,[11,544,134,358],()=>e(e.s=2400)),_N_E=e.O()}]);